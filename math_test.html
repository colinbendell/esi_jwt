<esi:comment text="
---- WARNING: GENERATED ESI ----
"/><esi:function name="assertEqual"><esi:assign name="name" value="$(ARGS{0})"/><esi:assign name="val" value="$(ARGS{1})"/><esi:assign name="expect" value="$(ARGS{2})"/><esi:assign name="message" value="'Fail! (expected: '+$(expect)+' but got: '+$(val)+') '"/><esi:choose><esi:when test="$(val)==$(expect)"><esi:assign name="message" value="'Pass'"/></esi:when></esi:choose><esi:return value="'Test '+$(name)+'... '+$(message)+'
'"/></esi:function><esi:function name="logical_right_shift"><esi:assign name="x" value="$(ARGS{0})"/><esi:assign name="n" value="$(ARGS{1})"/><esi:assign name="size" value="32"/><esi:return value="($(x)>>$(n))&(~(((1<<$(size))>>$(n))<<1))"/></esi:function><esi:function name="power"><esi:assign name="n" value="$(ARGS{0})"/><esi:assign name="exp" value="$(ARGS{1})"/><esi:assign name="val" value="1"/><esi:choose><esi:when test="$(exp)>1"><esi:assign name="val" value="$(n)*$power($(n),$(exp)-1)"/></esi:when><esi:when test="$(exp)==1"><esi:assign name="val" value="$(n)"/></esi:when></esi:choose><esi:return value="$(val)"/></esi:function><esi:function name="toBase16"><esi:assign name="val" value="$(ARGS{0})"/><esi:assign name="ret" value="$(HEX_CHARS{$(val)%16})"/><esi:assign name="val" value="$(val)/16"/><esi:choose><esi:when test="$(val)>0"><esi:assign name="ret" value="$toBase16($(val))+$str($(ret))"/></esi:when></esi:choose><esi:return value="$str($(ret))"/></esi:function><esi:assign name="HEX_CHARS" value="'0123456789abcdef'"/><esi:function name="toBase10"><esi:assign name="hex" value="$(ARGS{0})"/><esi:choose><esi:when test="$is_empty($(hex))"><esi:return value="0"/></esi:when></esi:choose><esi:assign name="c" value="$index($(HEX_CHARS),$(hex{0}))"/><esi:assign name="c" value="$(c)*$power(16,$len($(hex))-1)"/><esi:choose><esi:when test="$len($(hex))>1"><esi:assign name="c" value="$(c)+$toBase10($substr($(hex),1))"/></esi:when></esi:choose><esi:return value="$(c)"/></esi:function><esi:function name="toHex"><esi:assign name="number" value="$(ARGS{0})"/><esi:assign name="nstr" value="$toBase16($(number))"/><esi:choose><esi:when test="($len($(nstr))%2)==0"><esi:return value="$(nstr)"/></esi:when></esi:choose><esi:return value="'0'+$(nstr)"/></esi:function><esi:assign name="BASE64_CHARS" value="'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='"/><esi:function name="hexToBase64"><esi:assign name="input" value="$(ARGS{0})"/><esi:assign name="b64value" value="''"/><esi:assign name="i" value="0"/><esi:assign name="_loop" value="[0..((($len($(input))+5)/6)-1)]"/><esi:foreach collection="$(_loop)"><esi:choose><esi:when test="!($(i)<=((($len($(input))+5)/6)-1))"><esi:break/></esi:when></esi:choose><esi:assign name="chr1" value="$toBase10($(input{($(i)*6)+0})+$(input{($(i)*6)+1}))"/><esi:assign name="chr2" value="$toBase10($(input{($(i)*6)+2})+$(input{($(i)*6)+3}))"/><esi:assign name="chr3" value="$toBase10($(input{($(i)*6)+4})+$(input{($(i)*6)+5}))"/><esi:assign name="enc1" value="$(chr1)>>2"/><esi:assign name="enc2" value="(($(chr1)&3)<<4)|($(chr2)>>4)"/><esi:assign name="enc3" value="(($(chr2)&15)<<2)|($(chr3)>>6)"/><esi:assign name="enc4" value="$(chr3)&63"/><esi:choose><esi:when test="(($(i)*6)+3)>$len($(input))"><esi:assign name="enc3" value="64"/><esi:assign name="enc4" value="$(enc3)"/></esi:when><esi:when test="(($(i)*6)+5)>$len($(input))"><esi:assign name="enc4" value="64"/></esi:when></esi:choose><esi:assign name="b64value" value="$(b64value)+($(BASE64_CHARS{$(enc1)})+$(BASE64_CHARS{$(enc2)})+$(BASE64_CHARS{$(enc3)})+$(BASE64_CHARS{$(enc4)}))"/><esi:assign name="i" value="$(i)+1"/></esi:foreach><esi:return value="$(b64value)"/></esi:function><esi:function name="base64toHex"><esi:assign name="input" value="$(ARGS{0})"/><esi:assign name="output" value="''"/><esi:choose><esi:when test="($index($(input),'-')>=0)||($index($(input),'_')>=0)"><esi:assign name="input" value="$replace($replace($(input),'-','+'),'_','/')"/></esi:when></esi:choose><esi:assign name="i" value="0"/><esi:assign name="_loop" value="[0..((($len($(input))+3)/4)-1)]"/><esi:foreach collection="$(_loop)"><esi:choose><esi:when test="!($(i)<=((($len($(input))+3)/4)-1))"><esi:break/></esi:when></esi:choose><esi:assign name="enc1" value="$index($(BASE64_CHARS),$(input{($(i)*4)+0}))"/><esi:assign name="enc2" value="$index($(BASE64_CHARS),$(input{($(i)*4)+1}|'='))"/><esi:assign name="enc3" value="$index($(BASE64_CHARS),$(input{($(i)*4)+2}|'='))"/><esi:assign name="enc4" value="$index($(BASE64_CHARS),$(input{($(i)*4)+3}|'='))"/><esi:assign name="chr1" value="($(enc1)<<2)|($(enc2)>>4)"/><esi:assign name="chr2" value="(($(enc2)&15)<<4)|($(enc3)>>2)"/><esi:assign name="chr3" value="(($(enc3)&3)<<6)|$(enc4)"/><esi:assign name="output" value="$(output)+$toHex($(chr1))"/><esi:choose><esi:when test="$(enc3)!=64"><esi:assign name="output" value="$(output)+$toHex($(chr2))"/></esi:when></esi:choose><esi:choose><esi:when test="$(enc4)!=64"><esi:assign name="output" value="$(output)+$toHex($(chr3))"/></esi:when></esi:choose><esi:assign name="i" value="$(i)+1"/></esi:foreach><esi:assign name="x" value="0"/><esi:assign name="x" value="$(x)+1"/><esi:return value="$(output)"/></esi:function><esi:function name="base64url_decode"><esi:assign name="input" value="$(ARGS{0})"/><esi:assign name="input" value="$replace($replace($(input),'-','+'),'_','/')"/><esi:choose><esi:when test="($len($(input))%4)==2"><esi:assign name="input" value="$(input)+'=='"/></esi:when></esi:choose><esi:choose><esi:when test="($len($(input))%4)==3"><esi:assign name="input" value="$(input)+'='"/></esi:when></esi:choose><esi:return value="$base64_decode($(input))"/></esi:function><esi:vars>$assertEqual('powers(2,2)',$power(2,2),4)</esi:vars><esi:vars>$assertEqual('toBase16(65535)',$toBase16(65535),'ffff')</esi:vars><esi:vars>$assertEqual('toBase16(16)',$toBase16(16),'10')</esi:vars><esi:vars>$assertEqual('toBase16(8)',$toBase16(8),'8')</esi:vars><esi:vars>$assertEqual('toBase16(\'ffff\')',$toBase10('ffff'),65535)</esi:vars><esi:vars>$assertEqual('toBase16(10)',$toBase10('10'),16)</esi:vars><esi:vars>$assertEqual('toBase16(8)',$toBase10('8'),8)</esi:vars><esi:vars>$assertEqual('toHex(8)',$toHex(8),'08')</esi:vars><esi:vars>$assertEqual('toHex(16)',$toHex(16),'10')</esi:vars><esi:vars>$assertEqual('hexToBase64(\'010001\')',$hexToBase64('010001'),'AQAB')</esi:vars><esi:vars>$assertEqual('base64toHex(\'AQAB\')',$base64toHex('AQAB'),'010001')</esi:vars>